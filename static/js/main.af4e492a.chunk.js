(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{26:function(e,t,c){},28:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(19),r=c.n(n),i=(c(26),c(4)),l=c(17),j=s.a.createContext(),d=c(0),o=function(){return function(e){return function(t){return Object(d.jsx)(j.Consumer,{children:function(c){return Object(d.jsx)(e,Object(l.a)(Object(l.a)({},t),{},{service:c}))}})}}},u=c(9),h=(c(28),function(e){var t=e.data,c=e.loading,a=e.isFound,s=t.id,n=t.title,r=t.type,i=t.year,l=t.image,j=t.awards,o=t.genreList,h=t.imDbRating;return n?Object(d.jsxs)(u.b,{to:"/filmpage/".concat(s),className:"search-card",children:[Object(d.jsx)("div",{className:"search-card__image",children:Object(d.jsx)("img",{src:l,alt:n})}),Object(d.jsxs)("div",{className:"search-card__info",children:[Object(d.jsx)("div",{className:"search-card__title",children:n}),Object(d.jsxs)("div",{className:"search-card__subtitle",children:[Object(d.jsx)("h2",{className:"search-card__type",children:r}),Object(d.jsx)("h2",{className:"search-card__genre",children:o[0].value}),Object(d.jsx)("h2",{className:"search-card__year",children:i})]}),Object(d.jsx)("div",{className:"search-card__description",children:j})]}),Object(d.jsxs)("div",{className:"search-card__rating",children:["IMDb ",h]})]}):c?Object(d.jsx)("div",{className:"search-card",children:Object(d.jsx)("div",{className:"search-card__preloader",children:Object(d.jsx)("div",{className:"spinner-eclipse",children:Object(d.jsx)("div",{className:"spinner-eclipse__content",children:Object(d.jsx)("div",{})})})})}):a?Object(d.jsx)("div",{className:"search-card",children:Object(d.jsx)("div",{className:"search-card__preloader",children:Object(d.jsx)("span",{children:a})})}):Object(d.jsx)("div",{className:"search-card search-card__hidden"})}),b=(c(34),o()((function(e){var t=Object(a.useState)({}),c=Object(i.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!1),l=Object(i.a)(r,2),j=l[0],o=l[1],u=Object(a.useState)(null),b=Object(i.a)(u,2),m=b[0],f=b[1],O=e.service;var p=function(){var e=document.querySelector(".search__form-input").value;""===e||0==e.trim()?(o(!1),f("Empty request")):O.getSearchResult(e).then((function(e){var t;e.results.length?(t=e.results[0].id,O.getCardData(t).then((function(e){t?(n(e),o(!1)):console.log("Not found")}))):(o(!1),f("Nothing found"),console.log(m))}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"search",children:Object(d.jsxs)("form",{className:"search__form",children:[Object(d.jsx)("div",{className:"search__form-block",children:Object(d.jsx)("input",{type:"text",className:"search__form-input",id:"searchText",placeholder:"Type here something..."})}),Object(d.jsx)("button",{className:"search-button",type:"submit",onClick:function(e){e.preventDefault(),n({}),o(!0),p()},children:Object(d.jsx)("span",{className:"search-button__text",children:"Search"})})]})}),Object(d.jsx)(h,{data:s,loading:j,isFound:m})]})})));c(35);var m=function(){return Object(d.jsxs)("div",{className:"home",children:[Object(d.jsx)("h1",{className:"home__title",children:" Unlimited movies, TV shows, and more."}),Object(d.jsx)("h2",{className:"home__subtitle",children:"Watch anywhere. Cancel anytime."})]})},f=c(8),O=c.n(f),p=c(11),x=c(21),_=function e(){var t=this;Object(x.a)(this,e),this.API_KEY="k_mflg6001",this.SERVER="https://imdb-api.com/en/API",this.getData=function(){var e=Object(p.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!(c=e.sent).ok){e.next=9;break}return e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 ".concat(t));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getSearchResult=function(){var e=Object(p.a)(O.a.mark((function e(c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData("".concat(t.SERVER,"/Search/").concat(t.API_KEY,"/").concat(c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getCardData=function(){var e=Object(p.a)(O.a.mark((function e(c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData("".concat(t.SERVER,"/Title/").concat(t.API_KEY,"/").concat(c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getBackdrop=function(){var e=Object(p.a)(O.a.mark((function e(c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData("".concat(t.SERVER,"/Posters/").concat(t.API_KEY,"/").concat(c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTrailer=function(){var e=Object(p.a)(O.a.mark((function e(c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData("".concat(t.SERVER,"/Trailer/").concat(t.API_KEY,"/").concat(c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=new _,g=function(e){var t=Object(a.useState)(null),c=Object(i.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)([]),l=Object(i.a)(r,2),j=l[0],d=l[1],o=Object(a.useState)(null),u=Object(i.a)(o,2),h=u[0],b=u[1];return Object(a.useEffect)((function(){v.getCardData(e).then((function(e){return n({data:e})}))}),[e]),Object(a.useEffect)((function(){v.getBackdrop(e).then((function(e){return d(e.backdrops)}))}),[e]),Object(a.useEffect)((function(){v.getTrailer(e).then((function(e){return b(e.link)}))}),[e]),{filmInfo:s,backdrops:j,trailer:h}},N=(c(37),function(){return Object(d.jsx)("div",{className:"header-search",children:Object(d.jsx)("input",{className:"header-search__input",placeholder:"Type here something"})})}),k=(c(38),function(){return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("div",{className:"header__logo",children:"FILMS"}),Object(d.jsx)(N,{})]})}),E=(c(39),c.p+"static/media/background.244c7251.jpg"),y=function(e){var t=e.data,c=e.backdrop,s=e.trailer,n=Object(a.useState)(E),r=Object(i.a)(n,2),l=r[0],j=r[1];return Object(a.useEffect)((function(){c&&j(c.link)})),Object(d.jsxs)("div",{className:"main-page",children:[Object(d.jsx)("img",{className:"main-page__image",alt:t.title,src:l}),Object(d.jsxs)("div",{className:"main-page__info",children:[Object(d.jsx)("h1",{className:"main-page__title",children:t.title}),Object(d.jsxs)("div",{className:"main-page__subtitle",children:[Object(d.jsxs)("div",{className:"main-page__rating",children:["IMDb ",t.imDbRating]}),Object(d.jsx)("h2",{className:"main-page__type",children:t.type}),Object(d.jsx)("h2",{className:"main-page__genre",children:t.genreList[0].value}),Object(d.jsx)("h2",{className:"main-page__year",children:t.year})]})]}),Object(d.jsx)("a",{href:s,target:"_blank",rel:"noreferrer",className:"main-page__button",children:"Watch"}),Object(d.jsx)("div",{className:"main-page__description",children:t.awards})]})},S=(c(40),function(e){var t=e.data;return Object(d.jsxs)("div",{className:"similar-films",children:[Object(d.jsx)("h2",{className:"similar-films__title",children:"You may also like"}),Object(d.jsx)("div",{className:"similar-films__cards",children:t.map((function(e){return Object(d.jsxs)(u.b,{to:"/filmpage/".concat(e.id),className:"similar-films__film-card",children:[Object(d.jsx)("img",{className:"similar-films__film-image",src:e.image,alt:e.title}),Object(d.jsxs)("div",{className:"similar-films__film-info",children:[Object(d.jsx)("h2",{children:e.title}),Object(d.jsx)("h3",{children:e.genres}),Object(d.jsx)("article",{children:e.plot}),Object(d.jsxs)("div",{className:"similar-films__film-rating",children:["IMDb ",e.imDbRating]})]})]},e.id)}))})]})}),w=(c(41),function(e){var t=e.data;return Object(d.jsxs)("div",{className:"film-desription",children:[Object(d.jsxs)("div",{className:"film-desription__info",children:[Object(d.jsxs)("h1",{className:"film-desription__title",children:["Watch ",t.title," on FILMS"]}),Object(d.jsx)("article",{className:"film-desription__article",children:t.plot})]}),Object(d.jsx)(S,{data:t.similars.slice(0,4)})]})}),D=c(2);var I=function(e){var t=Object(a.useState)(null),c=Object(i.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(null),l=Object(i.a)(r,2),j=l[0],o=l[1],u=Object(a.useState)(null),h=Object(i.a)(u,2),b=h[0],m=h[1],f=g(e.match.params.id),O=f.filmInfo,p=f.backdrops,x=f.trailer;return Object(a.useEffect)((function(){n(O),o(p[0]),m(x)}),[O,p,x]),function(){var e=Object(D.e)().pathname;Object(a.useEffect)((function(){window.scrollTo(0,0)}),[e])}(),null!==s?(console.log(s),Object(d.jsxs)("div",{className:"film-page",children:[Object(d.jsx)(k,{}),Object(d.jsx)(y,{data:s.data,backdrop:j,trailer:b}),Object(d.jsx)(w,{data:s.data})]})):Object(d.jsx)("div",{className:"film-page",children:Object(d.jsx)(k,{})})};var R=function(){return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)(D.a,{exact:!0,path:"/",children:Object(d.jsxs)("div",{className:"homepage",children:[Object(d.jsx)(m,{}),Object(d.jsx)(b,{})]})}),Object(d.jsx)(D.a,{path:"/filmpage/:id",component:I})]})},T=(c(42),new _);r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(j.Provider,{value:T,children:Object(d.jsx)(u.a,{basename:"/IMDb-explorer",children:Object(d.jsx)(R,{})})})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.af4e492a.chunk.js.map